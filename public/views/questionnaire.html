<md-content class="md-padding" layout="row" ng-init="service.isTeacher()" ng-show="!loading">
	<md-button class="md-fab" ng-click="create()" aria-label="Lisa uus">
		<md-icon class="material-icons">create</md-icon>
		<md-tooltip md-visible="demo.showTooltip" md-direction="{{demo.tipDirection}}">
			Lisa uus!
		</md-tooltip>
	</md-button>
	<div layout="column" flex="20">
		<md-list>
			<md-subheader class="md-no-sticky"></md-subheader>
			<md-list-item class="md-3-line" ng-repeat="item in questionnaires" ng-click="view(item)">
				<div class="md-list-item-text" layout="column">
					<h4>
										Pealkiri: {{item.title}}
									</h4>
					<p>
						Aeg mis kulub: {{item.totalTime}}
					</p>
					<p>
						Maksimum punktid: {{item.totalPoints}}
					</p>
					<p>
						Loodud: {{item.createdDate | date:'MM/dd/yyyy @ h:mm'}}
					</p>
				</div>
			</md-list-item>
			<md-divider></md-divider>
		</md-list>
	</div>
	<div layout="column" flex>
		<div ng-if="activeQuestionnaire.title">
			<md-input-container class="md-block" flex-gt-sm>
				<label>Pealkiri</label>
				<input ng-model="activeQuestionnaire.title">
			</md-input-container>
			<md-input-container class="md-block" flex-gt-sm>
				<label>Täitmise aeg</label>
				<input ng-model="activeQuestionnaire.totalTime" type="number" step="1" min="0" max="1888900">
			</md-input-container>
			<md-list-item class="secondary-button-padding" ng-repeat="x in activeQuestionnaire.questions track by $index">
				<div class="md-list-item-text">
					<md-input-container class="md-block" flex-gt-sm>
						<label>Küsimus:</label>
						<input ng-click="x.active ? x.active=false : x.active=true" ng-model="x.title">
					</md-input-container>
					<md-select ng-init="x.type" ng-model="x.type">
						<md-option>
							Valik
						</md-option>
						<md-option>
							Tühi lünk
						</md-option>
					</md-select>
					<!--<input ng-model="x.type">
								<span>{{x.type}}</span>
								<span>{{x.maxPoints}}</span>
								<md-button md-no-ink class="md-primary" ng-click="editQuestion(x, event)">Muuda</md-button>
								<md-button class="md-warn" ng-click="remQuestion(x)">Eemalda</md-button>
								<br>
								<label class="md-block" flex-gt-sm>Vastused:</label>-->
					<div ng-if="x.active">
						<div ng-if="x.type=='Valik'">

							<md-list-item ng-repeat="y in x.variants track by $index">
								<div layout="row">

									<!-- <md-input-container style="margin-right: 10px;">
										<input ng-model="x.type">
									</md-input-container> -->
									<md-input-container class="md-block" flex-gt-sm>
										<label>Vastus:</label>
										<input ng-model="y.answer">
									</md-input-container>
									<md-checkbox ng-model="y.bool" aria-label="Õige/Vale"></md-checkbox>
									<!-- See muudab kogu bloki klikitavaks
									<md-input-container class="md-block" flex-gt-sm>
										<md-checkbox ng-model="y.bool" aria-label="Õige/Vale"></md-checkbox>
									</md-input-container>
								-->
									<md-input-container class="md-block" flex-gt-sm>
										<label>Punktid:</label>
										<input ng-model="y.points" type="number" step="0.5" min="-100" max="100">
									</md-input-container>
									<md-card-actions layout="row" layout-align="center">
										<i ng-click="remVariant(activeQuestionnaire,x,y)" class="material-icons">clear</i>
									</md-card-actions>

									<!--<span>{{y.answer}}</span>
												<md-button md-no-ink class="md-primary" ng-click="editQuestion(x, event)">Muuda</md-button>
												<md-button class="md-warn" ng-click="remQuestion(x)">Eemalda</md-button>-->
								</div>
							</md-list-item>

							<md-button class="md-primary" ng-click="addVariant(x,variant)">Lisa variant</md-button>
						</div>
						<div ng-if="x.type=='Tühi lünk'">
							<!--<input ng-model="x.type">-->
							<div layout="row">
								<md-input-container class="md-block" flex-gt-sm>
									<label>Vastus:</label>
									<input ng-model="x.variants[0]">
								</md-input-container>
								<md-input-container class="md-block" flex-gt-sm>
									<label>Punktid:</label>
									<input ng-model="x.maxPoints" type="number" step="0.5" min="-100" max="100">
								</md-input-container>
							</div>
						</div>
						<md-button class="md-warn" ng-click="remQuestion(x)">Eemalda küsimus</md-button>
					</div>
				</div>
			</md-list-item>
			<md-input-container class="md-block" flex-gt-sm>
				<label>Loomise aeg</label>
				<input ng-model="activeQuestionnaire.createdDate" readonly>
			</md-input-container>
			<md-button class="md-raised" ng-click="addQuestion(activeQuestionnaire)">Lisa küsimus</md-button>
			<br>
			<br>
			<md-button class="md-raised md-primary" ng-click="update(activeQuestionnaire)">Salvesta</md-button>
			<md-button class="md-raised md-warn" ng-click="delete(activeQuestionnaire)">Kustuta</md-button>
		</div>
	</div>
</md-content>
